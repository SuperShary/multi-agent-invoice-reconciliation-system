{
  "invoice_id": "MC-INV-3421",
  "processing_timestamp": "2026-02-02T03:06:16.802256Z",
  "processing_duration_seconds": 11.82,
  "document_info": {
    "filename": "Invoice_3_Different_Format.pdf",
    "file_size_kb": 2.9,
    "document_quality": "excellent"
  },
  "processing_results": {
    "extraction_confidence": 0.98,
    "document_quality": "excellent",
    "extracted_data": {
      "invoice_number": "MC-INV-3421",
      "invoice_date": "2024-01-22",
      "supplier_name": "MEDCHEM INGREDIENTS",
      "supplier_address": "Bristol Science Park\nBristol BS16 7FR",
      "supplier_vat": "GB456789012",
      "po_reference": "PO-2024-003",
      "payment_terms": "30 days net",
      "bill_to": {
        "company": "NIYAMRAI Limited",
        "address": "Hayes Business Centre, Uxbridge, UB4 ONE, UK"
      },
      "line_items": [
        {
          "item_code": "MC-584",
          "description": "Pregelatinized Starch",
          "quantity": 200.0,
          "unit": "kg",
          "unit_price": 6.75,
          "line_total": 1350.0,
          "extraction_confidence": 0.95
        },
        {
          "item_code": "MC-215",
          "description": "Gelatin Type A 200 Bloom",
          "quantity": 50.0,
          "unit": "kg",
          "unit_price": 45.0,
          "line_total": 2250.0,
          "extraction_confidence": 0.95
        },
        {
          "item_code": "MC-376",
          "description": "Lactose Monohydrate Mesh 200",
          "quantity": 150.0,
          "unit": "kg",
          "unit_price": 11.2,
          "line_total": 1680.0,
          "extraction_confidence": 0.95
        },
        {
          "item_code": "MC-492",
          "description": "Croscarmellose Sodium",
          "quantity": 30.0,
          "unit": "kg",
          "unit_price": 28.5,
          "line_total": 855.0,
          "extraction_confidence": 0.95
        }
      ],
      "subtotal": 6135.0,
      "vat_rate": 0.2,
      "vat_amount": 1227.0,
      "total": 7362.0,
      "currency": "GBP"
    },
    "matching_results": {
      "po_match_confidence": 0.98,
      "matched_po": "PO-2024-003",
      "match_method": "exact_po_reference",
      "supplier_match": true,
      "date_variance_days": null,
      "line_items_matched": 4,
      "line_items_total": 4,
      "match_rate": 1.0,
      "alternative_matches": []
    },
    "discrepancies": [],
    "total_variance": {
      "amount": 0.0,
      "percentage": 0.0,
      "within_tolerance": true
    },
    "recommended_action": "auto_approve",
    "risk_level": "low",
    "confidence": 0.98,
    "agent_reasoning": "Successfully extracted invoice data using Gemini Vision. Found 4 line items. Critical fields present: invoice_number=True, supplier=True, PO_ref=True, total=True. Found exact PO reference match: 'PO-2024-003' exists in database. Matched PO: PO-2024-003. Supplier match: True (100% similarity). Line items matched: 4/4. No discrepancies detected. All line items match PO prices and quantities within tolerance. Invoice MC-INV-3421 processed with 98% extraction confidence. Document quality assessed as 'excellent'. Matched to PO-2024-003 via exact po reference (98% confidence). No discrepancies detected. No significant risk factors identified. RECOMMENDATION: AUTO_APPROVE. All criteria met for automatic approval. High confidence extraction, exact PO match, no discrepancies."
  },
  "agent_execution_trace": {
    "document_intelligence_agent": {
      "duration_ms": 11801,
      "confidence": 0.98,
      "status": "success",
      "reasoning": "Successfully extracted invoice data using Gemini Vision. Found 4 line items. Critical fields present: invoice_number=True, supplier=True, PO_ref=True, total=True."
    },
    "matching_agent": {
      "duration_ms": 1,
      "confidence": 0.98,
      "status": "success",
      "reasoning": "Found exact PO reference match: 'PO-2024-003' exists in database. Matched PO: PO-2024-003. Supplier match: True (100% similarity). Line items matched: 4/4."
    },
    "discrepancy_detection_agent": {
      "duration_ms": 0,
      "confidence": 0.95,
      "status": "success",
      "reasoning": "No discrepancies detected. All line items match PO prices and quantities within tolerance."
    },
    "resolution_recommendation_agent": {
      "duration_ms": 0,
      "confidence": 0.95,
      "status": "success",
      "reasoning": "Recommended auto_approve based on 2 factors"
    }
  },
  "human_review_feedback": null
}